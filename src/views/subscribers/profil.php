<?php

use parisecran\DBAL\Connector;
use parisecran\Entity\Subscribers;

session_start();

require_once __DIR__ . "/../../../vendor/autoload.php";

$dbh = new Connector();
$subscribersModel = new Subscribers($dbh->dbConnector);

if (!isset($_SESSION['id'])) {
    header("Location: ../subscribers/login.php");
}

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    if (isset($_POST['deco'])) {
        $subscribersModel->logoutSubcriber();
    }
}


$reservationList = $subscribersModel->SelectReservationPaid($_SESSION['id']);
$reco = $subscribersModel->recommendationFilms($_SESSION['id']);
// print_r($reservationList);

$currentDate = new DateTime();
// print_r($currentDate);

$birthdate = new DateTime($_SESSION['birthdate']);
$titlePage = "Profil";
$moisFrancais = [
    'January' => 'Janvier',
    'February' => 'Février',
    'March' => 'Mars',
    'April' => 'Avril',
    'May' => 'Mai',
    'June' => 'Juin',
    'July' => 'Juillet',
    'August' => 'Août',
    'September' => 'Septembre',
    'October' => 'Octobre',
    'November' => 'Novembre',
    'December' => 'Décembre'
];
require_once __DIR__ . "/../../../src/views/header.html.php";

?>
<!-- <div class="profil-modal">
    <button id="modal-close">
        <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.9393 33.9394C13.3536 34.5252 13.3536 35.4748 13.9393 36.0606C14.5251 36.6464 15.4749 36.6464 16.0607 36.0606L13.9393 33.9394ZM26.0606 26.0606C26.6464 25.4748 26.6464 24.5252 26.0606 23.9394C25.4748 23.3536 24.5252 23.3536 23.9394 23.9394L26.0606 26.0606ZM23.9394 23.9394C23.3536 24.5252 23.3536 25.4748 23.9394 26.0606C24.5252 26.6464 25.4748 26.6464 26.0606 26.0606L23.9394 23.9394ZM36.0606 16.0607C36.6464 15.4749 36.6464 14.5251 36.0606 13.9393C35.4748 13.3536 34.5252 13.3536 33.9394 13.9393L36.0606 16.0607ZM26.0606 23.9394C25.4748 23.3536 24.5252 23.3536 23.9394 23.9394C23.3536 24.5252 23.3536 25.4748 23.9394 26.0606L26.0606 23.9394ZM33.9394 36.0606C34.5252 36.6464 35.4748 36.6464 36.0606 36.0606C36.6464 35.4748 36.6464 34.5252 36.0606 33.9394L33.9394 36.0606ZM23.9394 26.0606C24.5252 26.6464 25.4748 26.6464 26.0606 26.0606C26.6464 25.4748 26.6464 24.5252 26.0606 23.9394L23.9394 26.0606ZM16.0607 13.9393C15.4749 13.3536 14.5251 13.3536 13.9393 13.9393C13.3536 14.5251 13.3536 15.4749 13.9393 16.0607L16.0607 13.9393ZM16.0607 36.0606L26.0606 26.0606L23.9394 23.9394L13.9393 33.9394L16.0607 36.0606ZM26.0606 26.0606L36.0606 16.0607L33.9394 13.9393L23.9394 23.9394L26.0606 26.0606ZM23.9394 26.0606L33.9394 36.0606L36.0606 33.9394L26.0606 23.9394L23.9394 26.0606ZM26.0606 23.9394L16.0607 13.9393L13.9393 16.0607L23.9394 26.0606L26.0606 23.9394Z" fill="white" />
        </svg>
    </button>
    <div class="modal-content">
        <img src="../../../public/images_film/leyn.webp" alt="">
        <div class="modal-info">
            <h3>Titre du film</h3>
            <div class="modal-stars">
                <button>
                    <svg class="star" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_429_27)">
                            <path d="M15 3.5L19 11L28.5 12.5L22 18.5L23 27.5L14.5 23.5L7 27.5L7.5 18.5L2 12L10.5 11L15 3.5Z" fill="#8D8D8D" stroke="black" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.9995 0.9375C15.2599 0.937333 15.5152 1.00947 15.737 1.14586C15.9588 1.28225 16.1384 1.47755 16.2558 1.71L20.1258 9.38625L28.792 10.6275C29.0533 10.6648 29.2989 10.7748 29.5006 10.9451C29.7023 11.1154 29.852 11.339 29.9326 11.5903C30.0132 11.8417 30.0214 12.1107 29.9563 12.3665C29.8912 12.6223 29.7555 12.8546 29.5645 13.0369L23.3114 18.9994L24.7852 27.4144C24.8302 27.6722 24.8024 27.9375 24.7049 28.1804C24.6074 28.4233 24.4441 28.6341 24.2332 28.7892C24.0224 28.9443 23.7725 29.0375 23.5116 29.0583C23.2507 29.0791 22.9891 29.0266 22.7564 28.9069L14.9995 24.9131L7.24265 28.9069C7.00993 29.0266 6.7484 29.0791 6.48749 29.0583C6.22658 29.0375 5.97665 28.9443 5.76582 28.7892C5.55499 28.6341 5.39163 28.4233 5.29413 28.1804C5.19662 27.9375 5.16884 27.6722 5.2139 27.4144L6.68765 18.9975L0.434525 13.035C0.244143 12.8527 0.108849 12.6205 0.0440804 12.3649C-0.0206883 12.1094 -0.0123237 11.8408 0.0682196 11.5898C0.148763 11.3388 0.298242 11.1154 0.499601 10.9453C0.70096 10.7752 0.946091 10.665 1.20702 10.6275L9.87327 9.38625L13.7433 1.71C13.8606 1.47755 14.0402 1.28225 14.262 1.14586C14.4838 1.00947 14.7391 0.937333 14.9995 0.9375ZM14.9995 5.4675L12.0558 11.3063C11.9538 11.5087 11.8043 11.6835 11.6202 11.8157C11.4361 11.9479 11.2227 12.0337 10.9983 12.0656L4.47328 12.9994L9.1739 17.4806C9.34096 17.6405 9.466 17.8392 9.53796 18.059C9.60991 18.2787 9.62655 18.5129 9.5864 18.7406L8.47265 25.1081L14.3564 22.0781C14.5553 21.9758 14.7758 21.9224 14.9995 21.9224C15.2232 21.9224 15.4437 21.9758 15.6427 22.0781L21.5264 25.1081L20.4108 18.7406C20.3709 18.5127 20.3878 18.2785 20.4601 18.0587C20.5324 17.8389 20.6578 17.6404 20.8252 17.4806L25.5258 12.9994L19.0008 12.0656C18.7767 12.0334 18.5637 11.9475 18.3799 11.8153C18.1961 11.6831 18.047 11.5085 17.9452 11.3063L14.9995 5.4675Z" fill="#8D8D8D" />
                        </g>
                        <defs>
                            <clipPath id="clip0_429_27">
                                <rect width="30" height="30" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>
                </button>
                <button>
                    <svg class="star" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_429_27)">
                            <path d="M15 3.5L19 11L28.5 12.5L22 18.5L23 27.5L14.5 23.5L7 27.5L7.5 18.5L2 12L10.5 11L15 3.5Z" fill="#8D8D8D" stroke="black" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.9995 0.9375C15.2599 0.937333 15.5152 1.00947 15.737 1.14586C15.9588 1.28225 16.1384 1.47755 16.2558 1.71L20.1258 9.38625L28.792 10.6275C29.0533 10.6648 29.2989 10.7748 29.5006 10.9451C29.7023 11.1154 29.852 11.339 29.9326 11.5903C30.0132 11.8417 30.0214 12.1107 29.9563 12.3665C29.8912 12.6223 29.7555 12.8546 29.5645 13.0369L23.3114 18.9994L24.7852 27.4144C24.8302 27.6722 24.8024 27.9375 24.7049 28.1804C24.6074 28.4233 24.4441 28.6341 24.2332 28.7892C24.0224 28.9443 23.7725 29.0375 23.5116 29.0583C23.2507 29.0791 22.9891 29.0266 22.7564 28.9069L14.9995 24.9131L7.24265 28.9069C7.00993 29.0266 6.7484 29.0791 6.48749 29.0583C6.22658 29.0375 5.97665 28.9443 5.76582 28.7892C5.55499 28.6341 5.39163 28.4233 5.29413 28.1804C5.19662 27.9375 5.16884 27.6722 5.2139 27.4144L6.68765 18.9975L0.434525 13.035C0.244143 12.8527 0.108849 12.6205 0.0440804 12.3649C-0.0206883 12.1094 -0.0123237 11.8408 0.0682196 11.5898C0.148763 11.3388 0.298242 11.1154 0.499601 10.9453C0.70096 10.7752 0.946091 10.665 1.20702 10.6275L9.87327 9.38625L13.7433 1.71C13.8606 1.47755 14.0402 1.28225 14.262 1.14586C14.4838 1.00947 14.7391 0.937333 14.9995 0.9375ZM14.9995 5.4675L12.0558 11.3063C11.9538 11.5087 11.8043 11.6835 11.6202 11.8157C11.4361 11.9479 11.2227 12.0337 10.9983 12.0656L4.47328 12.9994L9.1739 17.4806C9.34096 17.6405 9.466 17.8392 9.53796 18.059C9.60991 18.2787 9.62655 18.5129 9.5864 18.7406L8.47265 25.1081L14.3564 22.0781C14.5553 21.9758 14.7758 21.9224 14.9995 21.9224C15.2232 21.9224 15.4437 21.9758 15.6427 22.0781L21.5264 25.1081L20.4108 18.7406C20.3709 18.5127 20.3878 18.2785 20.4601 18.0587C20.5324 17.8389 20.6578 17.6404 20.8252 17.4806L25.5258 12.9994L19.0008 12.0656C18.7767 12.0334 18.5637 11.9475 18.3799 11.8153C18.1961 11.6831 18.047 11.5085 17.9452 11.3063L14.9995 5.4675Z" fill="#8D8D8D" />
                        </g>
                        <defs>
                            <clipPath id="clip0_429_27">
                                <rect width="30" height="30" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>

                </button>
                <button>
                    <svg class="star" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_429_27)">
                            <path d="M15 3.5L19 11L28.5 12.5L22 18.5L23 27.5L14.5 23.5L7 27.5L7.5 18.5L2 12L10.5 11L15 3.5Z" fill="#8D8D8D" stroke="black" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.9995 0.9375C15.2599 0.937333 15.5152 1.00947 15.737 1.14586C15.9588 1.28225 16.1384 1.47755 16.2558 1.71L20.1258 9.38625L28.792 10.6275C29.0533 10.6648 29.2989 10.7748 29.5006 10.9451C29.7023 11.1154 29.852 11.339 29.9326 11.5903C30.0132 11.8417 30.0214 12.1107 29.9563 12.3665C29.8912 12.6223 29.7555 12.8546 29.5645 13.0369L23.3114 18.9994L24.7852 27.4144C24.8302 27.6722 24.8024 27.9375 24.7049 28.1804C24.6074 28.4233 24.4441 28.6341 24.2332 28.7892C24.0224 28.9443 23.7725 29.0375 23.5116 29.0583C23.2507 29.0791 22.9891 29.0266 22.7564 28.9069L14.9995 24.9131L7.24265 28.9069C7.00993 29.0266 6.7484 29.0791 6.48749 29.0583C6.22658 29.0375 5.97665 28.9443 5.76582 28.7892C5.55499 28.6341 5.39163 28.4233 5.29413 28.1804C5.19662 27.9375 5.16884 27.6722 5.2139 27.4144L6.68765 18.9975L0.434525 13.035C0.244143 12.8527 0.108849 12.6205 0.0440804 12.3649C-0.0206883 12.1094 -0.0123237 11.8408 0.0682196 11.5898C0.148763 11.3388 0.298242 11.1154 0.499601 10.9453C0.70096 10.7752 0.946091 10.665 1.20702 10.6275L9.87327 9.38625L13.7433 1.71C13.8606 1.47755 14.0402 1.28225 14.262 1.14586C14.4838 1.00947 14.7391 0.937333 14.9995 0.9375ZM14.9995 5.4675L12.0558 11.3063C11.9538 11.5087 11.8043 11.6835 11.6202 11.8157C11.4361 11.9479 11.2227 12.0337 10.9983 12.0656L4.47328 12.9994L9.1739 17.4806C9.34096 17.6405 9.466 17.8392 9.53796 18.059C9.60991 18.2787 9.62655 18.5129 9.5864 18.7406L8.47265 25.1081L14.3564 22.0781C14.5553 21.9758 14.7758 21.9224 14.9995 21.9224C15.2232 21.9224 15.4437 21.9758 15.6427 22.0781L21.5264 25.1081L20.4108 18.7406C20.3709 18.5127 20.3878 18.2785 20.4601 18.0587C20.5324 17.8389 20.6578 17.6404 20.8252 17.4806L25.5258 12.9994L19.0008 12.0656C18.7767 12.0334 18.5637 11.9475 18.3799 11.8153C18.1961 11.6831 18.047 11.5085 17.9452 11.3063L14.9995 5.4675Z" fill="#8D8D8D" />
                        </g>
                        <defs>
                            <clipPath id="clip0_429_27">
                                <rect width="30" height="30" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>
                </button>
                <button>
                    <svg class="star" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_429_27)">
                            <path d="M15 3.5L19 11L28.5 12.5L22 18.5L23 27.5L14.5 23.5L7 27.5L7.5 18.5L2 12L10.5 11L15 3.5Z" fill="#8D8D8D" stroke="black" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.9995 0.9375C15.2599 0.937333 15.5152 1.00947 15.737 1.14586C15.9588 1.28225 16.1384 1.47755 16.2558 1.71L20.1258 9.38625L28.792 10.6275C29.0533 10.6648 29.2989 10.7748 29.5006 10.9451C29.7023 11.1154 29.852 11.339 29.9326 11.5903C30.0132 11.8417 30.0214 12.1107 29.9563 12.3665C29.8912 12.6223 29.7555 12.8546 29.5645 13.0369L23.3114 18.9994L24.7852 27.4144C24.8302 27.6722 24.8024 27.9375 24.7049 28.1804C24.6074 28.4233 24.4441 28.6341 24.2332 28.7892C24.0224 28.9443 23.7725 29.0375 23.5116 29.0583C23.2507 29.0791 22.9891 29.0266 22.7564 28.9069L14.9995 24.9131L7.24265 28.9069C7.00993 29.0266 6.7484 29.0791 6.48749 29.0583C6.22658 29.0375 5.97665 28.9443 5.76582 28.7892C5.55499 28.6341 5.39163 28.4233 5.29413 28.1804C5.19662 27.9375 5.16884 27.6722 5.2139 27.4144L6.68765 18.9975L0.434525 13.035C0.244143 12.8527 0.108849 12.6205 0.0440804 12.3649C-0.0206883 12.1094 -0.0123237 11.8408 0.0682196 11.5898C0.148763 11.3388 0.298242 11.1154 0.499601 10.9453C0.70096 10.7752 0.946091 10.665 1.20702 10.6275L9.87327 9.38625L13.7433 1.71C13.8606 1.47755 14.0402 1.28225 14.262 1.14586C14.4838 1.00947 14.7391 0.937333 14.9995 0.9375ZM14.9995 5.4675L12.0558 11.3063C11.9538 11.5087 11.8043 11.6835 11.6202 11.8157C11.4361 11.9479 11.2227 12.0337 10.9983 12.0656L4.47328 12.9994L9.1739 17.4806C9.34096 17.6405 9.466 17.8392 9.53796 18.059C9.60991 18.2787 9.62655 18.5129 9.5864 18.7406L8.47265 25.1081L14.3564 22.0781C14.5553 21.9758 14.7758 21.9224 14.9995 21.9224C15.2232 21.9224 15.4437 21.9758 15.6427 22.0781L21.5264 25.1081L20.4108 18.7406C20.3709 18.5127 20.3878 18.2785 20.4601 18.0587C20.5324 17.8389 20.6578 17.6404 20.8252 17.4806L25.5258 12.9994L19.0008 12.0656C18.7767 12.0334 18.5637 11.9475 18.3799 11.8153C18.1961 11.6831 18.047 11.5085 17.9452 11.3063L14.9995 5.4675Z" fill="#8D8D8D" />
                        </g>
                        <defs>
                            <clipPath id="clip0_429_27">
                                <rect width="30" height="30" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>
                </button>
                <button>
                    <svg class="star" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_429_27)">
                            <path d="M15 3.5L19 11L28.5 12.5L22 18.5L23 27.5L14.5 23.5L7 27.5L7.5 18.5L2 12L10.5 11L15 3.5Z" fill="#8D8D8D" stroke="black" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.9995 0.9375C15.2599 0.937333 15.5152 1.00947 15.737 1.14586C15.9588 1.28225 16.1384 1.47755 16.2558 1.71L20.1258 9.38625L28.792 10.6275C29.0533 10.6648 29.2989 10.7748 29.5006 10.9451C29.7023 11.1154 29.852 11.339 29.9326 11.5903C30.0132 11.8417 30.0214 12.1107 29.9563 12.3665C29.8912 12.6223 29.7555 12.8546 29.5645 13.0369L23.3114 18.9994L24.7852 27.4144C24.8302 27.6722 24.8024 27.9375 24.7049 28.1804C24.6074 28.4233 24.4441 28.6341 24.2332 28.7892C24.0224 28.9443 23.7725 29.0375 23.5116 29.0583C23.2507 29.0791 22.9891 29.0266 22.7564 28.9069L14.9995 24.9131L7.24265 28.9069C7.00993 29.0266 6.7484 29.0791 6.48749 29.0583C6.22658 29.0375 5.97665 28.9443 5.76582 28.7892C5.55499 28.6341 5.39163 28.4233 5.29413 28.1804C5.19662 27.9375 5.16884 27.6722 5.2139 27.4144L6.68765 18.9975L0.434525 13.035C0.244143 12.8527 0.108849 12.6205 0.0440804 12.3649C-0.0206883 12.1094 -0.0123237 11.8408 0.0682196 11.5898C0.148763 11.3388 0.298242 11.1154 0.499601 10.9453C0.70096 10.7752 0.946091 10.665 1.20702 10.6275L9.87327 9.38625L13.7433 1.71C13.8606 1.47755 14.0402 1.28225 14.262 1.14586C14.4838 1.00947 14.7391 0.937333 14.9995 0.9375ZM14.9995 5.4675L12.0558 11.3063C11.9538 11.5087 11.8043 11.6835 11.6202 11.8157C11.4361 11.9479 11.2227 12.0337 10.9983 12.0656L4.47328 12.9994L9.1739 17.4806C9.34096 17.6405 9.466 17.8392 9.53796 18.059C9.60991 18.2787 9.62655 18.5129 9.5864 18.7406L8.47265 25.1081L14.3564 22.0781C14.5553 21.9758 14.7758 21.9224 14.9995 21.9224C15.2232 21.9224 15.4437 21.9758 15.6427 22.0781L21.5264 25.1081L20.4108 18.7406C20.3709 18.5127 20.3878 18.2785 20.4601 18.0587C20.5324 17.8389 20.6578 17.6404 20.8252 17.4806L25.5258 12.9994L19.0008 12.0656C18.7767 12.0334 18.5637 11.9475 18.3799 11.8153C18.1961 11.6831 18.047 11.5085 17.9452 11.3063L14.9995 5.4675Z" fill="#8D8D8D" />
                        </g>
                        <defs>
                            <clipPath id="clip0_429_27">
                                <rect width="30" height="30" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>
                </button>

            </div>
            <button id="submit-note">Valider la note</button>
        </div>
    </div>
</div> -->
<main id="profil">
    <h2>Vos réservation <span>(<?= count($reservationList) ?>)</span></h2>
    <div class="container-profil-reservation">
        <?php foreach ($reservationList as $reservation) {
            $reservatinDateTime = new DateTime($reservation['time_slot']);
            $formatedDate = $reservatinDateTime->format('d F H:i');
            $formatedDate = strtr($formatedDate, $moisFrancais)
        ?>
            <div class="reservation" data-comment-id="<?= $reservation['comment_id'] ?>">
                <div class="reservation-description">
                    <img src="<?= "../../../public/images_film/" . $reservation['image'] ?>" alt="Film <?= $reservation['title'] ?>">
                    <div class="reservation-info">
                        <h3><?= $reservation['title'] ?></h3>
                        <h4><?= $formatedDate ?></h4>
                        <p>Cinema <?= $reservation['cinema_name'] ?></p>
                        <p>Salle <?= $reservation['room_name'] ?> <span><?= $reservation['language'] ?></span></p>
                    </div>
                </div>
                <div class="reservation-actions">
                    <?php if ($currentDate < $reservatinDateTime) { ?>
                        <p>En cours</p>
                        <?php } else {
                        if ($reservation['comment_notation'] == null) { ?>
                            <button class="reservation-rating-toggle">Noter ce film <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g clip-path="url(#clip0_60_349)">
                                        <path d="M9.9987 2.33334L12.6654 7.33334L18.9987 8.33334L14.6654 12.3333L15.332 18.3333L9.66536 15.6667L4.66536 18.3333L4.9987 12.3333L1.33203 8L6.9987 7.33334L9.9987 2.33334Z" fill="#FF0020" stroke="black" />
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.99903 0.625C10.1726 0.624889 10.3428 0.672977 10.4907 0.763907C10.6386 0.854836 10.7583 0.985036 10.8365 1.14L13.4165 6.2575L19.194 7.085C19.3682 7.10984 19.532 7.18321 19.6664 7.29673C19.8009 7.41024 19.9007 7.55931 19.9544 7.72688C20.0082 7.89446 20.0136 8.07377 19.9702 8.24431C19.9268 8.41486 19.8363 8.56974 19.709 8.69125L15.5403 12.6663L16.5228 18.2763C16.5528 18.4481 16.5343 18.625 16.4693 18.7869C16.4043 18.9489 16.2954 19.0894 16.1548 19.1928C16.0143 19.2962 15.8477 19.3584 15.6737 19.3722C15.4998 19.3861 15.3254 19.3511 15.1703 19.2713L9.99903 16.6088L4.82778 19.2713C4.67263 19.3511 4.49828 19.3861 4.32434 19.3722C4.1504 19.3584 3.98378 19.2962 3.84323 19.1928C3.70268 19.0894 3.59377 18.9489 3.52877 18.7869C3.46376 18.625 3.44524 18.4481 3.47528 18.2763L4.45778 12.665L0.289032 8.69C0.162111 8.56844 0.071915 8.41365 0.0287359 8.24329C-0.0144432 8.07293 -0.00886687 7.89386 0.0448287 7.72652C0.0985243 7.55918 0.198177 7.4103 0.332416 7.29687C0.466656 7.18343 0.630076 7.11002 0.804032 7.085L6.58153 6.2575L9.16153 1.14C9.23976 0.985036 9.35949 0.854836 9.50736 0.763907C9.65523 0.672977 9.82544 0.624889 9.99903 0.625ZM9.99903 3.645L8.03653 7.5375C7.96853 7.67246 7.8689 7.78898 7.74615 7.87712C7.62339 7.96527 7.48115 8.02244 7.33153 8.04375L2.98153 8.66625L6.11528 11.6538C6.22666 11.7604 6.31002 11.8928 6.35799 12.0393C6.40596 12.1858 6.41705 12.3419 6.39028 12.4938L5.64778 16.7388L9.57028 14.7188C9.70291 14.6505 9.8499 14.615 9.99903 14.615C10.1482 14.615 10.2952 14.6505 10.4278 14.7188L14.3503 16.7388L13.6065 12.4938C13.5799 12.3418 13.5912 12.1857 13.6394 12.0391C13.6876 11.8926 13.7712 11.7602 13.8828 11.6538L17.0165 8.66625L12.6665 8.04375C12.5171 8.02225 12.3751 7.965 12.2526 7.87686C12.1301 7.78872 12.0307 7.6723 11.9628 7.5375L9.99903 3.645Z" fill="#FF0020" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_60_349">
                                            <rect width="20" height="20" fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg>

                            </button>
                        <?php } else { ?>
                            <button data-rating="<?= $reservation['comment_notation'] ?>" class="reservation-rating-toggle">Modifier votre note <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11.6671 6.66667H15.8338V2.5M15.5916 13.6307C14.815 14.8265 13.6756 15.7418 12.3406 16.2422C11.0056 16.7427 9.54515 16.802 8.17391 16.4114C6.8027 16.0208 5.59307 15.2011 4.72217 14.0722C3.85126 12.9434 3.36531 11.565 3.33545 10.1396C3.30559 8.71408 3.73317 7.31667 4.55605 6.15234C5.37891 4.98801 6.55343 4.11833 7.90708 3.67066C9.26073 3.22297 10.7224 3.22083 12.0772 3.66496C13.4321 4.10909 14.6088 4.97579 15.4347 6.13797" stroke="#FF0020" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </button>
                        <?php }
                        if ($reservation['comment_text'] == null) { ?>
                            <button class="btn-review">Laisser une critique <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.9417 18.5463C14.4188 18.5463 14.6867 18.2031 14.6867 17.6841V15.2483H15.6242C17.5578 15.2483 18.8636 13.9258 18.8636 11.9169V4.65961C18.8636 2.64229 17.5578 1.45368 15.6242 1.45368H4.37416C2.36523 1.45368 1.13477 2.65068 1.13477 4.65961V11.9169C1.13477 13.9174 2.36523 15.2483 4.37416 15.2483H9.9573L12.9791 18.0106C13.3725 18.3789 13.6069 18.5463 13.9417 18.5463Z" fill="#FF0020" />
                                </svg>
                            </button>

                        <?php } else { ?>
                            <button class="btn-review">Modifier votre critique <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12.9165 4.58328L15.2735 6.9403M2.5 17.4997L2.53954 17.2229C2.67947 16.2435 2.74943 15.7537 2.90857 15.2965C3.04979 14.8907 3.2427 14.5049 3.48255 14.1486C3.75284 13.7469 4.10266 13.3971 4.80228 12.6975L14.5089 2.9908C15.1598 2.33992 16.2151 2.33992 16.866 2.9908C17.5168 3.64167 17.5168 4.69695 16.866 5.34782L6.9812 15.2326C6.34649 15.8673 6.02914 16.1847 5.66767 16.437C5.34682 16.661 5.00078 16.8466 4.63665 16.9899C4.22643 17.1514 3.78646 17.2402 2.90661 17.4177L2.5 17.4997Z" stroke="#FF0020" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </button>
                    <?php }
                    } ?>
                </div>
            </div>
        <?php  } ?>
    </div>
    <div class="recomendation">
        <h2>Film qui pourrait vous plaire</h2>
        <div class="container-recomendation-film">
            <?php foreach ($reco as $film) { ?>

                <a href="../film/infos-film.php?id_film=<?= $film['id'] ?>">
                    <img src="<?= "../../../public/images_film/" . $film['image'] ?>" alt="film <?= $film['title'] ?>">
                    <p>Recommandé à <span><?= $film['nb_sub_reco'] ?>0%</span></p>
                </a>
            <?php } ?>

        </div>
    </div>
</main>



<!-- <div class="pp-container">

    <div class="pp-spec">
        <h3>Profil de <span style="color: red;"><?= $_SESSION['first_name'] . ' ' . $_SESSION['last_name'] ?></span></h3>
        <div>
            <span style="font-weight: bold;">Nom :</span>
            <span><?= $_SESSION['last_name'] ?></span>
        </div>
        <div>
            <span style="font-weight: bold;">Prénom :</span>
            <span><?= $_SESSION['first_name'] ?></span>
        </div>
        <div>
            <span style="font-weight: bold;">Email :</span>
            <span><?= $_SESSION['email'] ?></span>
        </div>
        <div>
            <span style="font-weight: bold;">Date de naissance :</span>
            <span><?= $birthdate->format('d F Y') ?></span>
        </div>
        <a href="changerMDP">Changer votre mot de passe</a>

        <form action="" method="post">
            <button type="submit" name="deco" value="true">Déconnexion</button>
        </form>
    </div>


    <div class="pp-historique">
        <div>
            <h3>Vos réservations <span style="color: red;">(<?= count($reservationList) ?>)</span></h3>
            <?php foreach ($reservationList as $reservation) { ?>
                <div class="pp-reserv">
                    <img src="<?= "../../../public/images_film/" . $reservation['image'] ?>" alt="Film <?= $reservation['title'] ?>">
                    <div>
                        <h3><?= $reservation['title'] ?></h3>
                        <p><?php echo date('d F Y', strtotime($reservation['time_slot'])); ?></p>
                        <p>Cinema <?= $reservation['cinema_name'] ?></p>
                        <p>Salle <?= $reservation['room_name'] ?></p>
                    </div>
                    <?php if ($reservation['comment_id'] == null) { ?>
                        <div class="pp-notation">
                            <p>Notez ce film <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g clip-path="url(#clip0_24_1239)">
                                        <path d="M7.99998 1.86667L10.1333 5.86667L15.2 6.66667L11.7333 9.86667L12.2666 14.6667L7.73332 12.5333L3.73332 14.6667L3.99998 9.86667L1.06665 6.4L5.59998 5.86667L7.99998 1.86667Z" fill="#FF0020" stroke="black" />
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M7.99971 0.5C8.13859 0.499911 8.27476 0.538382 8.39306 0.611125C8.51135 0.683869 8.60713 0.788029 8.66971 0.912L10.7337 5.006L15.3557 5.668C15.4951 5.68787 15.6261 5.74657 15.7336 5.83738C15.8412 5.92819 15.9211 6.04745 15.964 6.18151C16.007 6.31557 16.0114 6.45902 15.9767 6.59545C15.942 6.73189 15.8695 6.85579 15.7677 6.953L12.4327 10.133L13.2187 14.621C13.2427 14.7585 13.2279 14.9 13.1759 15.0295C13.1239 15.1591 13.0368 15.2715 12.9244 15.3543C12.8119 15.437 12.6786 15.4867 12.5395 15.4978C12.4003 15.5088 12.2608 15.4809 12.1367 15.417L7.99971 13.287L3.86271 15.417C3.7386 15.4809 3.59911 15.5088 3.45996 15.4978C3.32081 15.4867 3.18751 15.437 3.07507 15.3543C2.96263 15.2715 2.87551 15.1591 2.8235 15.0295C2.7715 14.9 2.75668 14.7585 2.78071 14.621L3.56671 10.132L0.231714 6.952C0.130177 6.85475 0.0580203 6.73092 0.023477 6.59463C-0.0110663 6.45834 -0.00660522 6.31509 0.0363513 6.18121C0.0793077 6.04734 0.15903 5.92824 0.266421 5.83749C0.373813 5.74675 0.504549 5.68802 0.643714 5.668L5.26571 5.006L7.32971 0.912C7.3923 0.788029 7.48808 0.683869 7.60637 0.611125C7.72467 0.538382 7.86084 0.499911 7.99971 0.5ZM7.99971 2.916L6.42971 6.03C6.37531 6.13797 6.29561 6.23118 6.19741 6.3017C6.0992 6.37222 5.98541 6.41795 5.86571 6.435L2.38571 6.933L4.89271 9.323C4.98181 9.40829 5.0485 9.51423 5.08688 9.63145C5.12525 9.74866 5.13413 9.87354 5.11271 9.995L4.51871 13.391L7.65671 11.775C7.76282 11.7204 7.8804 11.692 7.99971 11.692C8.11903 11.692 8.23661 11.7204 8.34272 11.775L11.4807 13.391L10.8857 9.995C10.8644 9.87345 10.8735 9.74853 10.912 9.63131C10.9506 9.51409 11.0174 9.40819 11.1067 9.323L13.6137 6.933L10.1337 6.435C10.0142 6.4178 9.90061 6.372 9.80259 6.30149C9.70457 6.23098 9.62503 6.13784 9.57071 6.03L7.99971 2.916Z" fill="#FF0020" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_24_1239">
                                            <rect width="16" height="16" fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg></p>
                            <p>Laisser une critique <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.9417 18.5463C14.4188 18.5463 14.6867 18.2031 14.6867 17.6841V15.2483H15.6242C17.5578 15.2483 18.8636 13.9258 18.8636 11.9169V4.65961C18.8636 2.64229 17.5578 1.45368 15.6242 1.45368H4.37416C2.36523 1.45368 1.13477 2.65068 1.13477 4.65961V11.9169C1.13477 13.9174 2.36523 15.2483 4.37416 15.2483H9.9573L12.9791 18.0106C13.3725 18.3789 13.6069 18.5463 13.9417 18.5463Z" fill="#FF0020" />
                                </svg>
                            </p>
                        </div>
                    <?php } else { ?>
                        <div class="pp-notation">
                            <p>modifier votre critique</p>
                        </div>
                    <?php } ?>
                </div>
            <?php } ?>
        </div>

        <div class="pp-reco-top">
            <h3>Film qui pourrait vous plaire</h3>
            <div class="pp-reco">
                <?php foreach ($reco as $film) { ?>
                    <div>
                        <img src="<?= "../../../public/images_film/" . $film['image'] ?>" alt="film <?= $film['title'] ?>">
                        <span>conseiller à <?= $film['nb_sub_reco'] ?> / 10</span>
                    </div>
                <?php } ?>
            </div>
        </div>

    </div>

</div> -->
<?php require_once __DIR__ . "/../../../src/views/footer.html.php" ?>